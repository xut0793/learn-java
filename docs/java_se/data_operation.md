# 数据运算

在 Java 编程语言中，常见的数据运算包括:

- 算术运算
- 赋值运算
- 比较运算
- 逻辑运算
- 位运算

## 运算符和操作数

- 运算符是用于执行操作的符号，Java 提供了丰富的运算符，包括算术运算符、赋值运算符、比较运算符、逻辑运算符、条件运算符、位运算符等。
- 操作数是运算符作用的对象，在 Java 中，操作数可以是变量、常量或表达式。

```java
int a = 10; //运算符是= 操作数是字面量
int b = a; // 操作数是变量
int c = a + b; // 运算符包括=和+,操作数是表达式 a+b
```

## 简单赋值运算

赋值运算用于将一个值赋给一个变量，使用等号运算符 `=`

```java
int a = 10;
double b = 3.14;
```

## 算术运算

算术运算符用于执行基本的数学运算，返回计算结果。

| 运算符 | 简单描述                               | 示例                                                                             |
| ------ | -------------------------------------- | -------------------------------------------------------------------------------- |
| `+`    | 加法，用于数值相加，也可用于字符串拼接 | `int sum = 5 + 3; // 结果为 8`                                                   |
| `-`    | 减法，用于数值相减                     | `int diff = 10 - 4; // 结果为 6`                                                 |
| `*`    | 乘法，用于数值相乘                     | `int product = 3 * 7; // 结果为 21`                                              |
| `/`    | 除法，用于数值相除。整数相除结果为整数 | `int quot = 10 / 2; // 结果为 5`<br>`double quotD = 10.0 / 3; // 结果约为 3.333` |
| `%`    | 取模，返回除法的余数                   | `int remainder = 10 % 3; // 结果为 1`                                            |

注意事项：

- 运算时要注意结果的范围，使用恰当的数据类型，避免溢出，比如`int a = 2147483647 * 2;`结果是-2，这是数据溢出导致结果不正确。
- 整数相除结果的是整数，结果不是四舍五入，而是直接舍去小数部分，比如 `10 / 4` 的结果是 2，而不是 2.5。
- 取模运算符只能用于整数类型。
- 浮点数运算结果是不精确的，因为某些小数是无法二进制精确表示的，比如 0.1。就像日常十进制也无法表示 1/3 的精确结果。

<<< ../../exercise/data_types/DataOperation.java#arithmeticOperators

## 比较运算

比较运算用于比较两个值的大小，结果返回布尔值。

| 运算符 | 简单描述                                       | 示例                            |
| ------ | ---------------------------------------------- | ------------------------------- |
| `==`   | 等于，用于比较两个值是否相等                   | `boolean c = 10 == 5; // false` |
| `!=`   | 不等于，用于比较两个值是否不相等               | `boolean d = 10 != 5; // true`  |
| `>`    | 大于，用于比较第一个值是否大于第二个值         | `boolean e = 10 > 5; // true`   |
| `<`    | 小于，用于比较第一个值是否小于第二个值         | `boolean f = 10 < 5; // false`  |
| `>=`   | 大于等于，用于比较第一个值是否大于等于第二个值 | `boolean g = 10 >= 5; // true`  |
| `<=`   | 小于等于，用于比较第一个值是否小于等于第二个值 | `boolean h = 10 <= 5; // false` |

注意事项：

- 比较运算符的结果是布尔值，只能是 true 或 false。
- 比较运算符只能用于数值类型和字符串类型。
- 等于不等于运算对于基本类型是值比较，对于引用类型是引用比较（这点在面向对象里讲解）。

<<< ../../exercise/data_types/DataOperation.java#comparisonOperators

## 逻辑运算

逻辑运算符用于对布尔值进行运算，返回布尔值。

| 运算符 | 简单描述                             | 示例                                   |
| ------ | ------------------------------------ | -------------------------------------- |
| `&&`   | 逻辑与，用于多个条件同时为真时为真   | `boolean c = true && false; // false`  |
| `\|\|` | 逻辑或，用于多个条件有一个为真时为真 | `boolean c = true \|\| false; // true` |
| `!`    | 逻辑非，用于对布尔值取反             | `boolean b = !false; // true`          |

短路运算：

- 逻辑与运算符 `&&` 的短路运算，当第一个操作数为 false 时，不会计算第二个操作数，直接返回 false，比如 `boolean b = false && a++ > 0;` 不会执行 `a++ > 0` 运算。
- 逻辑或运算符 `\|\|` 的短路运算，当第一个操作数为 true 时，不会计算第二个操作数，直接返回 true，比如 `boolean b = true \|\| (a = 10);` 不会执行 `a = 10;`。

<<< ../../exercise/data_types/DataOperation.java#logicalOperators

## 条件运算符

条件运算符，也称为三目运算符，或三元运算符，用于根据条件选择不同的结果，返回一个值。

| 运算符 | 简单描述                               | 示例                                                                     |
| ------ | -------------------------------------- | ------------------------------------------------------------------------ |
| `? :`  | 条件运算符，用于根据条件选择不同的结果 | `int a = 10;`<br>`int b = 5;`<br>`int max = a > b ? a : b; // 结果为 10` |

注意事项：

- 条件运算符的优先级低于算术运算符，低于比较运算符，高于赋值运算符。
- 条件运算符的三个操作数必须是布尔值和两个值，第一个操作数为 true 时返回第二个操作数，为 false 时返回第三个操作数。

<<< ../../exercise/data_types/DataOperation.java#ternaryOperators

## 位运算

位运算符用于对整数的二进制位进行运算，返回整数。

| 运算符 | 简单描述                                                     | 示例                                     |
| ------ | ------------------------------------------------------------ | ---------------------------------------- |
| `&`    | 按位与，用于对两个整数的二进制位进行与运算                   | `int c = 5 & 3; // 结果为 1`             |
| `\|`   | 按位或，用于对两个整数的二进制位进行或运算                   | `int c = 5 \| 3; // 结果为 7`            |
| `^`    | 按位异或，用于对两个整数的二进制位进行异或运算               | `int c = 5 ^ 3; // 结果为 6`             |
| `~`    | 按位非，用于对整数的二进制位进行取反运算                     | `int c = ~5; // 结果为 -6`               |
| `<<`   | 左移，用于将整数的二进制位向左移动指定的位数                 | `int c = 5 << 2; // 结果为 20`           |
| `>>`   | 右移，用于将整数的二进制位向右移动指定的位数                 | `int c = 5 >> 2; // 结果为 1`            |
| `>>>`  | 无符号右移，用于将整数的二进制位向右移动指定的位数，左侧补 0 | `int c = -5 >>> 2; // 结果为 1073741821` |

<<< ../../exercise/data_types/DataOperation.java#bitwiseOperators

## 复合赋值运算符

赋值运算，除了简单的等号赋值，还有一些复合赋值运算符，用于将一个值与变量进行运算，然后将结果赋给变量。

| 运算符 | 简单描述                                                                                     | 示例                                                                                                                                   |
| ------ | -------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------- |
| `++`   | 自增运算符，用于将变量的值加 1                                                               | `int a = 10;`<br>`int b = a++; // a 先赋值给b=10后，再自身执行加1，此时a=11`<br>`int b = ++a; // a 先执行加1后的结果11赋值给b=11,a=11` |
| `--`   | 自减运算符，用于将变量的值减 1                                                               | `int a = 10;`<br>`int b = a--; // a 先赋值给b=10后，再自身执行减1，此时a=9`<br>`int b = --a; // a 先执行减1后的结果9赋值给b=9,a=9`     |
| `+=`   | 加法赋值运算符，用于将一个值与变量相加，然后将结果赋给变量                                   | `int a = 10;`<br>`a += 5; // 结果为 15`                                                                                                |
| `-=`   | 减法赋值运算符，用于将一个值与变量相减，然后将结果赋给变量                                   | `int a = 10;`<br>`a -= 5; // 结果为 5`                                                                                                 |
| `*=`   | 乘法赋值运算符，用于将一个值与变量相乘，然后将结果赋给变量                                   | `int a = 10;`<br>`a *= 5; // 结果为 50`                                                                                                |
| `/=`   | 除法赋值运算符，用于将一个值与变量相除，然后将结果赋给变量                                   | `int a = 10;`<br>`a /= 5; // 结果为 2`                                                                                                 |
| `%=`   | 取模赋值运算符，用于将一个值与变量取模，然后将结果赋给变量                                   | `int a = 10;`<br>`a %= 3; // 结果为 1`                                                                                                 |
| `<<=`  | 左移赋值运算符，用于将一个值的二进制位向左移动指定的位数，然后将结果赋给变量                 | `int a = 10;`<br>`a <<= 2; // 结果为 40`                                                                                               |
| `>>=`  | 右移赋值运算符，用于将一个值的二进制位向右移动指定的位数，然后将结果赋给变量                 | `int a = 10;`<br>`a >>= 2; // 结果为 2`                                                                                                |
| `>>>=` | 无符号右移赋值运算符，用于将一个值的二进制位向右移动指定的位数，左侧补 0，然后将结果赋给变量 | `int a = -10;`<br>`a >>>= 2; // 结果为 1073741821`                                                                                     |
| `&=`   | 按位与赋值运算符，用于将一个值与变量进行按位与运算，然后将结果赋给变量                       | `int a = 10;`<br>`a &= 3; // 结果为 2`                                                                                                 |
| `\|=`  | 按位或赋值运算符，用于将一个值与变量进行按位或运算，然后将结果赋给变量                       | `int a = 10;`<br>`a \|= 3; // 结果为 11`                                                                                               |
| `^=`   | 按位异或赋值运算符，用于将一个值与变量进行按位异或运算，然后将结果赋给变量                   | `int a = 10;`<br>`a ^= 3; // 结果为 8`                                                                                                 |
| `~=`   | 按位非赋值运算符，用于将一个值的二进制位取反，然后将结果赋给变量                             | `int a = 10;`<br>`a ~= 3; // 结果为 -11`                                                                                               |

<<< ../../exercise/data_types/DataOperation.java#compoundOperators

## 运算符优先级

运算符优先级是指在表达式中，不同运算符的执行顺序。在 Java 中，运算符的优先级是固定的，不同运算符的优先级不同。

以下是 Java 运算符的优先级从高到低的列表：

1. 圆括号 `()`
2. 后缀运算符 `++`、`--`
3. 前缀运算符 `+`、`-`、`++`、`--`、`!`、`~`
4. 乘除运算符 `*`、`/`、`%`
5. 加减运算符 `+`、`-`
6. 位运算符 `<<`、`>>`、`>>>`
7. 关系运算符 `<`、`>`、`<=`、`>=`
8. 相等运算符 `==`、`!=`
9. 按位与运算符 `&`
10. 按位异或运算符 `^`
11. 按位或运算符 `|`
12. 逻辑与运算符 `&&`
13. 逻辑或运算符 `||`
14. 条件运算符 `? :`
15. 赋值运算符 `=`、`+=`、`-=`、`*=`、`/=`、`%=`

<<< ../../exercise/data_types/DataOperation.java#operatorPriority
