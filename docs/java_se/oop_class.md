# 类 Class

在现实世界中，我们会把一些具有共同特征和行为的事物归为一类，例如：动物、水果等。然后映射在计算机世界中，把具有相同数据和方法的对象也归为同一种数据类型，即**类**的概念。

前面提到过，`程序 = 数据结构 + 算法`。更具体点，可以理解为，程序主要是由数据和对数据的操作（包括数据的运算、比较、输入、输出等）组成的。高级语言会对数据进行分类，不同的数据类型有不同特征和操作。

所以可以把 **类** 看作是一种**自定义的数据类型**。Java 语言定义了 8 种基本数据类型（4 种整型 byte/short/int/long，2 种浮点数 float/double，一种字符型 char，一种真假类型 boolean），其它更复杂的数据类型就可能通过“**类**”来自定义。

类封装了数据和方法，数据看作是类的特征，操作是类的行为。

在 java 的类主体中，可以包含以下内容：

- 构造器
- 成员变量
- 成员方法
- 代码块
- 静态变量
- 静态方法
- 静态代码块
- 内部类
- 枚举类
- 注解

## 类的声明

在 java 中，最简单的类声明语法如下：

```java
class 类名 {
  // 类的具体内容
}
```

示例代码：

```java
class Student {
  // 类的具体内容
}
```

## 成员变量

类的成员变量是指类中定义的变量，用于描述类的特征。

成员变量的声明语法如下：

```java
访问修饰符 数据类型 变量名;
```

示例代码：

```java
class Student {
  // 成员变量
  int id; // 学号
  String name; // 姓名
  int age; // 年龄
  String gender; // 性别
  int score; // 成绩
}
```

### 基本类型的默认值

当一个类的成员变量是基本数据类型时，即使没有初始化这些字段，Java 也会为它们分配默认值。

>

| 数据类型 | 默认值   |
| -------- | -------- |
| byte     | 0        |
| short    | 0        |
| int      | 0        |
| long     | 0L       |
| float    | 0.0f     |
| double   | 0.0      |
| char     | '\u0000' |
| boolean  | false    |

注意，只有当变量作为类成员变量存在时，才会有默认值。如果变量是局部变量，没有默认值。最佳实践，应该是你遵循统一的习惯，显式地初始化所有变量，而不是依赖默认值。

## 成员方法

类的成员方法是指类中定义的方法，用于描述类的行为。

> 可以把类的成员方法，理解为常规编程语言中的函数。只不过在 Java 中，函数必须定义在类中，不能单独存在，也称为“方法”

类的成员方法的声明语法如下：

```java
访问修饰符 数据类型 方法名(参数列表) {
  // 方法体
}
```

示例代码：

```java
class Student {
  // 成员方法
  void study() {
    System.out.println("学习");
  }
}
```

## 类的实例化 new

类的实例化是指根据类的定义，创建一个类的对象。使用 `new` 关键字表示实例化一个对象的操作。

示例代码：

```java
// 实例化一个 Student 对象
Student stu = new Student();
```

对于对象的成员变量，需要通过对象来访问。

示例代码：

```java
// 访问对象的成员变量
stu.name = "张三";
stu.age = 18;
```

对于对象的成员方法，也需要通过对象来调用。

示例代码：

```java
// 调用对象的成员方法
stu.study();
```

## 构造器

上述示例代码中，初始化对象的成员变量：

- 要么在类中定义时初始化
- 要么在类实例化对象后，使用对象引用变量的方式初始化

因为类实例化代码是在运行时执行，大多数场景中，成员变量的初始值也是在程序执行过程中才知道，此时需要在程序执行创建对象时完成初始化。针对这种情形，类提供了一个特殊的方法，类的构造器方法来完成对象的初始化赋值。

因为类的构造方法是一个特殊的方法，所以在 Java 中限制它的方法名必须和类名相同，大小写也要一样，并且不能有返回值，也不能使用 `void` 关键字。

构造方法的语法如下：

```java
访问修饰符 类名(参数列表) {
  // 构造方法体
}
```

示例代码：

```java
class Student {
  // 构造方法
  Student(String name, int age) {
    // 初始化成员变量
    this.name = name;
    this.age = age;
    this.gender = gender;
    System.out.println("构造方法");
  }
}
```

如果类中没有定义构造方法，Java 会自动提供一个无参数的构造方法。类似下面的代码：

```java
class Student {
  // 如果缺省构造方法，Java 会自动提供一个无参数的构造方法
  Student() {}
}
```

## 静态成员变量 Static

类的静态成员变量是指类中定义的静态变量，用于描述类的特征。静态变量为所有实例化对象所共享。

静态成员变量的声明语法如下：

```java
访问修饰符 static 数据类型 变量名;
```

示例代码：

```java
class Student {
  // 静态成员变量
  static int count = 0;
}
```

静态成员变量可以通过对象引用变量访问，也可以类名直接访问。为了区分，最佳实践是统一通过类名来访问静态成员变量。

示例代码：

```java
// 通过实例对象访问静态成员变量
Student stu = new Student();
stu.count = 100; // 不推荐，因为静态成员变量为所有实例化对象所共享

// 推荐通过类名访问静态成员变量
Student.count = 100;
```

## 静态成员方法 Static

类的静态成员方法是指类中定义的静态方法，用于描述类的行为。静态方法为所有实例化对象所共享。

静态成员方法的声明语法如下：

```java
访问修饰符 static 数据类型 方法名(参数列表) {
  // 方法体
}
```

示例代码：

```java
class Student {
  // 静态成员方法
  static void study() {
    System.out.println("学习");
  }
}
```

静态成员方法可以通过类名直接调用，也可以通过对象引用变量调用。

示例代码：

```java
// 调用静态成员方法，推荐
Student.study();

// 也可以通过对象引用变量调用静态成员方法，不推荐
Student stu = new Student();
stu.study();
```

## 实例代码块

实例代码块是指在类中直接定义的代码块`{}`，每次调用构造器生成对象时都会执行，并且在构造方法前执行。实际上，实例代码块是被提取到每一个构造器中去执行的。

实例代码块的声明语法如下：

```java
{
  // 实例代码块
}
```

代码示例

```java
class TestCodeBlock {
  private String name;

  // 实例代码块，无 static 修饰
  {
    System.out.println("实例代码块");
    name = "张三";
  }

  // 无参构造器
  public TestCodeBlock() {
    System.out.println("无参构造器");
  }

  // 有参构造器
  public TestCodeBlock(String name) {
    System.out.println("有参构造器");
    this.name = name;
  }
}

class TestConstructor {
  public static void main(String[] args) {
    // 测试实例代码块执行顺序
    TestCodeBlock t1 = new TestCodeBlock();
    TestCodeBlock t2 = new TestCodeBlock("李四");
  }
}

// 输出顺序
// 实例代码块
// 无参构造器
// 实例代码块
// 有参构造器
```

## 静态代码块

静态代码块是指在类中定义的静态代码块，通常会用于初始化静态成员变量。

- 静态代码块在类加载时执行，只执行一次。
- 静态代码块的执行顺序优先于构造器。
- 静态代码块可以有多个，会按照定义的顺序执行。
- 静态代码块不能访问非静态成员变量和非静态成员方法。

静态代码块的声明语法如下：

```java
static {
  // 静态代码块
}
```

代码示例

代码示例：

```java
class TestCodeBlock {
  static int count;
  private String name;

  // 静态代码块，有 static 修饰
  static {
    System.out.println("静态代码块");
    count = 100;
  }

  // 实例代码块，无 static 修饰
  {
    System.out.println("实例代码块");
    name = "张三";
  }

  // 无参构造器
  public TestCodeBlock() {
    System.out.println("无参构造器");
  }

  // 有参构造器
  public TestCodeBlock(String name) {
    System.out.println("有参构造器");
    this.name = name;
  }
}

// 输出顺序
// 静态代码块
// 实例代码块
// 无参构造器
// 实例代码块
// 有参构造器
```

注意静态代码块执行输出，即使两次 `new` 生成 t1 和 t2 两个对象，静态代码块也只执行了一次，并且静态代码块的执行顺序优先于构造器。

上述内容是一个简单的概况，关于构造器、方法、访问修饰符等详细内容，会在后续的章节中详细介绍。
